---
name: wireguard
packages: []
templates:
  bin/pre-start.erb: bin/pre-start
  bin/post-start.erb: bin/post-start  
  bin/pre-stop.erb: bin/pre-stop
  bin/post-deploy.erb: bin/post-deploy
  config/wg0.conf.erb: config/wg0.conf 
properties:
  wireguard.address:
    description: wireguard adress
    default: 192.168.2.2/24
  wireguard.listen_port:
    description: wireguard listen port
    default: 51820
  wireguard.private_key:
    description: wireguard private key
  wireguard.dns:
    description: dns the server will give as dhcp
    default: 1.1.1.1,8.8.8.8
  wireguard.postup:
    description: script to apply after wg is up. default is setting nat
    default: iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
  wireguard.postdown:
    description: script to apply after wg is up. default is setting nat
    default: iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE


  wireguard.peer.endpoint:
    description: address of peer to join
    
  wireguard.peer.public_key:
    description: public key of peer

  wireguard.peer.allowed_ips:
    description: 

  wireguard.peer.persistent_keepalive:
    description:
    default: 25
